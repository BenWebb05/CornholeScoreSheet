<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cornhole Score Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .hidden { display: none; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #f4f4f4; }
    button { margin: 0 2px; }
    .totals td { font-weight: bold; background: #eef; }
    .flex-row { display: flex; align-items: center; gap: 4px; justify-content: center; }
    .team-separator { border-right: 2px solid #333; }
    .locked { opacity: 0.6; pointer-events: none; }
    #controls { margin-top: 20px; }
    input[type="number"] { width: 60px; }
  </style>
</head>
<body>
  <h1>Cornhole Score Tracker</h1>

  <div id="modeSelection">
    <button onclick="selectMode('solos')">Solos</button>
    <button onclick="selectMode('teams')">Teams</button>
  </div>

  <div id="soloNameForm" class="hidden">
    <h3>Enter Player Names</h3>
    <input type="text" id="soloPlayer1" placeholder="Player 1" />
    <input type="text" id="soloPlayer2" placeholder="Player 2" />
    <button onclick="startSolo()">Start Game</button>
  </div>

  <div id="teamNameForm" class="hidden">
    <h3>Enter Team Member Names</h3>
    <input type="text" id="team1p1" placeholder="Team 1 - Player 1" />
    <input type="text" id="team1p2" placeholder="Team 1 - Player 2" />
    <input type="text" id="team2p1" placeholder="Team 2 - Player 1" />
    <input type="text" id="team2p2" placeholder="Team 2 - Player 2" />
    <label><input type="checkbox" id="simpleTeamCheckbox" /> Simple Team Tracking</label>
    <button onclick="startTeams()">Start Game</button>
  </div>

  <div id="scoreboard" class="hidden">
    <div id="controls">
      <button onclick="addRound()">‚ûï Add Round</button>
      <button onclick="toggleUnlock()" id="unlockToggle">üîì Unlock All Rounds</button>
      <button onclick="resetGame()">üîÑ Reset</button>
      <button onclick="editNames()">‚úèÔ∏è Edit Names</button>
    </div>

    <table>
      <thead id="scoreHead"></thead>
      <tbody id="scoreTable"></tbody>
      <tfoot id="totalsFooter"></tfoot>
    </table>
  </div>

  <script>
    let mode = '';
    let roundCount = 0;
    let trackIndividual = true;
    let unlocked = false;

    function selectMode(m) {
      mode = m;
      document.getElementById("modeSelection").classList.add("hidden");
      if (m === "solos") {
        document.getElementById("soloNameForm").classList.remove("hidden");
      } else {
        document.getElementById("teamNameForm").classList.remove("hidden");
      }
    }

    function startSolo() {
      const p1 = document.getElementById("soloPlayer1").value || "Player 1";
      const p2 = document.getElementById("soloPlayer2").value || "Player 2";
      buildScoreboard([p1, p2]);
    }

    function startTeams() {
      const t1p1 = document.getElementById("team1p1").value || "Player 1";
      const t1p2 = document.getElementById("team1p2").value || "Player 2";
      const t2p1 = document.getElementById("team2p1").value || "Player 3";
      const t2p2 = document.getElementById("team2p2").value || "Player 4";
      trackIndividual = !document.getElementById("simpleTeamCheckbox").checked;
      buildScoreboard([t1p1, t1p2, t2p1, t2p2]);
    }

    function buildScoreboard(names) {
      document.getElementById("soloNameForm").classList.add("hidden");
      document.getElementById("teamNameForm").classList.add("hidden");
      document.getElementById("scoreboard").classList.remove("hidden");
      document.getElementById("scoreTable").innerHTML = "";
      document.getElementById("scoreHead").innerHTML = "";
      document.getElementById("totalsFooter").innerHTML = "";
      roundCount = 0;

      const thead = document.getElementById("scoreHead");
      const headerRow = document.createElement("tr");

      headerRow.innerHTML = "<th>Round</th>";

      if (mode === "solos") {
        names.forEach(name => {
          headerRow.innerHTML += `<th>${name}<br>Points</th><th>Cornholes</th><th>‚≠ê</th>`;
        });
      } else {
        if (trackIndividual) {
          const team1Name = `${names[0]} & ${names[1]}`;
          const team2Name = `${names[2]} & ${names[3]}`;
          headerRow.innerHTML += `<th colspan="6">${team1Name}</th><th colspan="6">${team2Name}</th>`;
        } else {
          const team1Name = `${names[0]} & ${names[1]}`;
          const team2Name = `${names[2]} & ${names[3]}`;
          headerRow.innerHTML += `<th>${team1Name}<br>Points</th><th>Cornholes</th>`;
          headerRow.innerHTML += `<th>${team2Name}<br>Points</th><th>Cornholes</th>`;
        }
      }

      thead.appendChild(headerRow);
    }

    function addRound() {
      roundCount++;
      const tbody = document.getElementById("scoreTable");
      const row = document.createElement("tr");
      row.classList.add("roundRow");
      row.innerHTML = `<td>${roundCount}</td>`;

      if (mode === "solos") {
        row.innerHTML += soloInputFields();
      } else {
        row.innerHTML += teamInputFields();
      }

      tbody.appendChild(row);
      lockPreviousRows();
    }

    function soloInputFields() {
      return `<td><input type="number" min="0" /></td><td><input type="number" min="0" /></td><td>‚≠ê</td>
              <td><input type="number" min="0" /></td><td><input type="number" min="0" /></td><td>‚≠ê</td>`;
    }

    function teamInputFields() {
      if (trackIndividual) {
        return `
        <td><input type="number" min="0" /></td><td><input type="number" min="0" /></td>
        <td><input type="number" min="0" /></td><td><input type="number" min="0" /></td>
        <td><input type="number" min="0" /></td><td><input type="number" min="0" /></td>
        <td><input type="number" min="0" /></td><td><input type="number" min="0" /></td>
        <td><input type="number" min="0" /></td><td><input type="number" min="0" /></td>
        <td><input type="number" min="0" /></td><td><input type="number" min="0" /></td>
        `;
      } else {
        return `
        <td><input type="number" min="0" /></td><td><input type="number" min="0" /></td>
        <td><input type="number" min="0" /></td><td><input type="number" min="0" /></td>`;
      }
    }

    function toggleUnlock() {
      unlocked = !unlocked;
      const rows = document.querySelectorAll(".roundRow");
      rows.forEach(r => {
        const inputs = r.querySelectorAll("input");
        inputs.forEach(inp => inp.disabled = !unlocked && r !== rows[rows.length - 1]);
      });
      document.getElementById("unlockToggle").textContent = unlocked ? "üîí Lock Rounds" : "üîì Unlock All Rounds";
    }

    function lockPreviousRows() {
      if (unlocked) return;
      const rows = document.querySelectorAll(".roundRow");
      rows.forEach((r, i) => {
        const inputs = r.querySelectorAll("input");
        inputs.forEach(inp => inp.disabled = i !== rows.length - 1);
      });
    }

    function resetGame() {
      roundCount = 0;
      document.getElementById("scoreTable").innerHTML = "";
      document.getElementById("scoreHead").innerHTML = "";
      document.getElementById("totalsFooter").innerHTML = "";
      document.getElementById("scoreboard").classList.add("hidden");
      document.getElementById("modeSelection").classList.remove("hidden");
    }

    function editNames() {
      resetGame();
      if (mode === "solos") {
        document.getElementById("soloNameForm").classList.remove("hidden");
      } else {
        document.getElementById("teamNameForm").classList.remove("hidden");
      }
    }
  </script>
</body>
</html>
