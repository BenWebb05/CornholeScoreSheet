<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cornhole Scoreboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .center {
      text-align: center;
      margin: 20px;
    }
    table {
      width: 100%;
      max-width: 700px;
      margin: 0 auto 20px;
      border-collapse: collapse;
      background: white;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      vertical-align: top;
      text-align: left;
    }
    input[type="number"] {
      width: 50px;
      text-align: center;
    }
    button {
      margin: 3px;
      padding: 2px 6px;
      cursor: pointer;
    }
    .totals {
      font-weight: bold;
    }
    .hidden {
      display: none;
    }
    .field-group {
      margin-bottom: 5px;
    }
    .flex-row {
      display: flex;
      align-items: center;
      gap: 4px;
      flex-wrap: nowrap;
    }
    .flex-row label {
      min-width: 30px;
      font-weight: bold;
    }
    .flex-row button {
      min-width: 28px;
      height: 28px;
      font-size: 20px;
      line-height: 20px;
      padding: 0;
      border-radius: 4px;
      border: 1px solid #888;
      background: #eee;
      user-select: none;
    }
    .locked {
      background-color: #ddd !important;
    }
    #unlockToggle {
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

  <h1>Cornhole Scoreboard</h1>

  <div id="modeSelection" class="center">
    <p><strong>Choose Game Mode:</strong></p>
    <button onclick="selectMode('solos')">Solos</button>
    <button onclick="selectMode('teams')">Teams</button>
  </div>

  <!-- Solo Player Names -->
  <div id="soloNameForm" class="center hidden">
    <p><strong>Enter Player Names:</strong></p>
    <input type="text" id="player1Name" placeholder="Player 1" value="Ben" />
    <input type="text" id="player2Name" placeholder="Player 2" value="Dad" />
    <br /><br />
    <button onclick="startSoloGame()">Start Game</button>
  </div>

  <!-- Team Names -->
  <div id="teamNameForm" class="center hidden">
    <p><strong>Enter Team 1 Player Names:</strong></p>
    <input type="text" id="team1Player1" placeholder="Team 1 Player 1" value="Ben" />
    <input type="text" id="team1Player2" placeholder="Team 1 Player 2" value="Lilly" />
    <p><strong>Enter Team 2 Player Names:</strong></p>
    <input type="text" id="team2Player1" placeholder="Team 2 Player 1" value="Matt" />
    <input type="text" id="team2Player2" placeholder="Team 2 Player 2" value="Maddy" />
    <br /><br />
    <button onclick="startTeamGame()">Start Game</button>
  </div>

  <div id="scoreboard" class="hidden">
    <div class="center">
      <button onclick="addRound()">‚ûï Add Round</button>
      <button onclick="resetGame()">üîÑ Reset</button>
      <button onclick="editNames()">‚úèÔ∏è Edit Names</button>
      <button id="unlockToggle" onclick="toggleUnlock()">üîì Unlock All Rounds</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>Round</th>
          <th id="col1Header">Player 1</th>
          <th id="col2Header">Player 2</th>
        </tr>
      </thead>
      <tbody id="scoreTable">
        <!-- rounds go here -->
      </tbody>
      <tfoot>
        <tr class="totals">
          <td>Total Points</td>
          <td id="totalCol1">0</td>
          <td id="totalCol2">0</td>
        </tr>
      </tfoot>
    </table>
  </div>

<script>
  let mode = ""; // "solos" or "teams"
  let roundCount = 0;
  let roundsLocked = false;

  function selectMode(selectedMode) {
    mode = selectedMode;
    document.getElementById("modeSelection").classList.add("hidden");
    if (mode === "solos") {
      document.getElementById("soloNameForm").classList.remove("hidden");
    } else if (mode === "teams") {
      document.getElementById("teamNameForm").classList.remove("hidden");
    }
  }

  function startSoloGame() {
    const p1 = document.getElementById("player1Name").value || "Player 1";
    const p2 = document.getElementById("player2Name").value || "Player 2";
    setupScoreboard(p1, p2);
    document.getElementById("soloNameForm").classList.add("hidden");
    document.getElementById("scoreboard").classList.remove("hidden");
    resetGame();
    addRound();
  }

  function startTeamGame() {
    const t1p1 = document.getElementById("team1Player1").value.trim() || "Team1Player1";
    const t1p2 = document.getElementById("team1Player2").value.trim() || "Team1Player2";
    const t2p1 = document.getElementById("team2Player1").value.trim() || "Team2Player1";
    const t2p2 = document.getElementById("team2Player2").value.trim() || "Team2Player2";

    const team1Name = `${t1p1} & ${t1p2}`;
    const team2Name = `${t2p1} & ${t2p2}`;

    setupScoreboard(team1Name, team2Name);
    document.getElementById("teamNameForm").classList.add("hidden");
    document.getElementById("scoreboard").classList.remove("hidden");
    resetGame();
    addRound();
  }

  function setupScoreboard(name1, name2) {
    document.getElementById("col1Header").textContent = name1;
    document.getElementById("col2Header").textContent = name2;
  }

  function addRound() {
    if (roundsLocked) {
      alert("Please unlock rounds to add a new round.");
      return;
    }
    const table = document.getElementById("scoreTable");
    roundCount++;
    const row = document.createElement("tr");

    if (mode === "teams") {
      row.innerHTML = `
        <td>Round ${roundCount}</td>
        <td>
          <div class="flex-row">
            <label>Pts:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="flex-row">
            <label>CH:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
        </td>
        <td>
          <div class="flex-row">
            <label>Pts:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="flex-row">
            <label>CH:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
        </td>
      `;
    } else {
      row.innerHTML = `
        <td>Round ${roundCount}</td>
        <td>
          <div class="flex-row">
            <label>Pts:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="flex-row">
            <label>CH:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="field-group">
            ‚≠ê: <input type="checkbox" onchange="updateTotals()" />
          </div>
        </td>
        <td>
          <div class="flex-row">
            <label>Pts:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="flex-row">
            <label>CH:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="field-group">
            ‚≠ê: <input type="checkbox" onchange="updateTotals()" />
          </div>
        </td>
      `;
    }

    table.appendChild(row);
    lockPreviousRounds();
    updateTotals();
  }

  // Disable inputs for all rows except the last one
  function lockPreviousRounds() {
    const rows = document.querySelectorAll("#scoreTable tr");
    // Unlock all first (to avoid stuck)
    rows.forEach(row => {
      Array.from(row.querySelectorAll("input, button")).forEach(el => {
        el.disabled = false;
        el.classList.remove("locked");
      });
    });

    if (rows.length <= 1) return; // nothing to lock if only 1 round

    for (let i = 0; i < rows.length - 1; i++) {
      const row = rows[i];
      Array.from(row.querySelectorAll("input, button")).forEach(el => {
        el.disabled = true;
        el.classList.add("locked");
      });
    }
    roundsLocked = true;
  }

  // Unlock all rounds for editing
  function toggleUnlock() {
    const rows = document.querySelectorAll("#scoreTable tr");
    const unlockBtn = document.getElementById("unlockToggle");

    if (roundsLocked) {
      // Unlock
      rows.forEach(row => {
        Array.from(row.querySelectorAll("input, button")).forEach(el => {
          el.disabled = false;
          el.classList.remove("locked");
        });
      });
      roundsLocked = false;
      unlockBtn.textContent = "üîì Unlock All Rounds";
    } else {
      // Lock again
      lockPreviousRounds();
      unlockBtn.textContent = "üîí Lock All Rounds";
    }
  }

  function changeValue(button, delta) {
    if (button.disabled) return; // prevent changing locked inputs
    const input = button.parentElement.querySelector("input[type='number']");
    let val = parseInt(input.value) || 0;
    val = Math.max(0, val + delta);
    input.value = val;
    updateTotals();
  }

  function updateTotals() {
    let col1Points = 0, col2Points = 0;
    let col1CH = 0, col2CH = 0;
    let col1Baggers = 0, col2Baggers = 0;

    const rows = document.querySelectorAll("#scoreTable tr");

    rows.forEach(row => {
      const inputs = row.querySelectorAll("input");

      if (mode === "teams") {
        col1Points += parseInt(inputs[0].value) || 0;
        col1CH += parseInt(inputs[1].value) || 0;
        col2Points += parseInt(inputs[2].value) || 0;
        col2CH += parseInt(inputs[3].value) || 0;
      } else {
        col1Points += parseInt(inputs[0].value) || 0;
        const ch1 = parseInt(inputs[1].value) || 0;
        col1CH += ch1;
        if (inputs[2].checked || ch1 === 4) col1Baggers++;

        col2Points += parseInt(inputs[3].value) || 0;
        const ch2 = parseInt(inputs[4].value) || 0;
        col2CH += ch2;
        if (inputs[5].checked || ch2 === 4) col2Baggers++;
      }
    });

    document.getElementById("totalCol1").textContent = col1Points;
    document.getElementById("totalCol2").textContent = col2Points;

    if (mode === "solos") {
      if (!document.getElementById("cornholeTotalsRow")) {
        const tfoot = document.querySelector("table tfoot");
        const cornRow = document.createElement("tr");
        cornRow.className = "totals";
        cornRow.id = "cornholeTotalsRow";
        cornRow.innerHTML = `
          <td>Total Cornholes</td>
          <td id="cornP1">${col1CH}</td>
          <td id="cornP2">${col2CH}</td>
        `;
        tfoot.appendChild(cornRow);

        const baggerRow = document.createElement("tr");
        baggerRow.className = "totals";
        baggerRow.id = "baggerTotalsRow";
        baggerRow.innerHTML = `
          <td>4-Baggers</td>
          <td id="baggerP1">${col1Baggers}</td>
          <td id="baggerP2">${col2Baggers}</td>
        `;
        tfoot.appendChild(baggerRow);
      } else {
        document.getElementById("cornP1").textContent = col1CH;
        document.getElementById("cornP2").textContent = col2CH;
        document.getElementById("baggerP1").textContent = col1Baggers;
        document.getElementById("baggerP2").textContent = col2Baggers;
      }
    } else {
      const cornRow = document.getElementById("cornholeTotalsRow");
      if (cornRow) cornRow.remove();
      const baggerRow = document.getElementById("baggerTotalsRow");
      if (baggerRow) baggerRow.remove();
    }
  }

  function resetGame() {
    document.getElementById("scoreTable").innerHTML = "";
    roundCount = 0;
    document.getElementById("totalCol1").textContent = "0";
    document.getElementById("totalCol2").textContent = "0";
    const cornRow = document.getElementById("cornholeTotalsRow");
    if (cornRow) cornRow.remove();
    const baggerRow = document.getElementById("baggerTotalsRow");
    if (baggerRow) baggerRow.remove();
    roundsLocked = false;
    document.getElementById("unlockToggle").textContent = "üîì Unlock All Rounds";
  }

  function editNames() {
    if (mode === "solos") {
      const newP1 = prompt("Enter new name for Player 1:", document.getElementById("col1Header").textContent);
      const newP2 = prompt("Enter new name for Player 2:", document.getElementById("col2Header").textContent);
      if (newP1) document.getElementById("col1Header").textContent = newP1;
      if (newP2) document.getElementById("col2Header").textContent = newP2;
    } else {
      const newT1 = prompt("Enter new name for Team 1:", document.getElementById("col1Header").textContent);
      const newT2 = prompt("Enter new name for Team 2:", document.getElementById("col2Header").textContent);
      if (newT1) document.getElementById("col1Header").textContent = newT1;
      if (newT2) document.getElementById("col2Header").textContent = newT2;
    }
  }
</script>

</body>
</html>
