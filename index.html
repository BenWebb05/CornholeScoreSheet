<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cornhole Scoreboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .center {
      text-align: center;
      margin: 20px;
    }
    table {
      width: 100%;
      max-width: 700px;
      margin: 0 auto 20px;
      border-collapse: collapse;
      background: white;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      vertical-align: top;
      text-align: left;
    }
    input[type="number"] {
      width: 50px;
      text-align: center;
    }
    button {
      margin: 3px;
      padding: 2px 6px;
      cursor: pointer;
    }
    .totals {
      font-weight: bold;
    }
    .hidden {
      display: none;
    }
    .field-group {
      margin-bottom: 5px;
    }
    .flex-row {
      display: flex;
      align-items: center;
      gap: 4px;
      flex-wrap: nowrap;
    }
    .flex-row label {
      min-width: 30px;
      font-weight: bold;
    }
    .flex-row button {
      min-width: 28px;
      height: 28px;
      font-size: 20px;
      line-height: 20px;
      padding: 0;
      border-radius: 4px;
      border: 1px solid #888;
      background: #eee;
      user-select: none;
    }
    .locked {
      background-color: #ddd !important;
    }
    #unlockToggle {
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

  <h1>Cornhole Scoreboard</h1>

  <div id="modeSelection" class="center">
    <p><strong>Choose Game Mode:</strong></p>
    <button onclick="selectMode('solos')">Solos</button>
    <button onclick="selectMode('teams')">Teams</button>
  </div>

  <!-- Solo Player Names -->
  <div id="soloNameForm" class="center hidden">
    <p><strong>Enter Player Names:</strong></p>
    <input type="text" id="player1Name" placeholder="Player 1" value="Ben" />
    <input type="text" id="player2Name" placeholder="Player 2" value="Dad" />
    <br /><br />
    <button onclick="startSoloGame()">Start Game</button>
  </div>

  <!-- Team Names -->
  <div id="teamNameForm" class="center hidden">
    <p><strong>Enter Team 1 Player Names:</strong></p>
    <input type="text" id="team1Player1" placeholder="Team 1 Player 1" value="Ben" />
    <input type="text" id="team1Player2" placeholder="Team 1 Player 2" value="Lilly" />
    <p><strong>Enter Team 2 Player Names:</strong></p>
    <input type="text" id="team2Player1" placeholder="Team 2 Player 1" value="Matt" />
    <input type="text" id="team2Player2" placeholder="Team 2 Player 2" value="Maddy" />
    <br /><br />
    <button onclick="startTeamGame()">Start Game</button>
  </div>

  <div id="scoreboard" class="hidden">
    <div class="center">
      <button onclick="addRound()">‚ûï Add Round</button>
      <button onclick="resetGame()">üîÑ Reset</button>
      <button onclick="editNames()">‚úèÔ∏è Edit Names</button>
      <button id="unlockToggle" onclick="toggleUnlock()">üîì Unlock All Rounds</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>Round</th>
          <th id="col1Header">Player 1</th>
          <th id="col2Header">Player 2</th>
        </tr>
      </thead>
      <tbody id="scoreTable">
        <!-- rounds go here -->
      </tbody>
      <tfoot>
        <tr class="totals">
          <td>Total Points</td>
          <td id="totalCol1">0</td>
          <td id="totalCol2">0</td>
        </tr>
      </tfoot>
    </table>
  </div>

<script>
  let mode = ""; // "solos" or "teams"
  let roundCount = 0;

  function selectMode(selectedMode) {
    mode = selectedMode;
    document.getElementById("modeSelection").classList.add("hidden");
    if (mode === "solos") {
      document.getElementById("soloNameForm").classList.remove("hidden");
    } else if (mode === "teams") {
      document.getElementById("teamNameForm").classList.remove("hidden");
    }
  }

  function startSoloGame() {
    const p1 = document.getElementById("player1Name").value || "Player 1";
    const p2 = document.getElementById("player2Name").value || "Player 2";
    setupScoreboard(p1, p2);
    document.getElementById("soloNameForm").classList.add("hidden");
    document.getElementById("scoreboard").classList.remove("hidden");
    resetGame();
    addRound();
  }

  function startTeamGame() {
    const t1p1 = document.getElementById("team1Player1").value.trim() || "Team1Player1";
    const t1p2 = document.getElementById("team1Player2").value.trim() || "Team1Player2";
    const t2p1 = document.getElementById("team2Player1").value.trim() || "Team2Player1";
    const t2p2 = document.getElementById("team2Player2").value.trim() || "Team2Player2";

    const team1Name = `${t1p1} & ${t1p2}`;
    const team2Name = `${t2p1} & ${t2p2}`;

    setupScoreboard(team1Name, team2Name);
    document.getElementById("teamNameForm").classList.add("hidden");
    document.getElementById("scoreboard").classList.remove("hidden");
    resetGame();
    addRound();
  }

  function setupScoreboard(name1, name2) {
    document.getElementById("col1Header").textContent = name1;
    document.getElementById("col2Header").textContent = name2;
  }

  function addRound() {
    const table = document.getElementById("scoreTable");
    roundCount++;
    const row = document.createElement("tr");

    if (mode === "teams") {
      row.innerHTML = `
        <td>Round ${roundCount}</td>
        <td>
          <div class="flex-row">
            <label>Pts:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="flex-row">
            <label>CH:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
        </td>
        <td>
          <div class="flex-row">
            <label>Pts:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="flex-row">
            <label>CH:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
        </td>
      `;
    } else {
      row.innerHTML = `
        <td>Round ${roundCount}</td>
        <td>
          <div class="flex-row">
            <label>Pts:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="flex-row">
            <label>CH:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="field-group">
            ‚≠ê: <input type="checkbox" onchange="updateTotals()" />
          </div>
        </td>
        <td>
          <div class="flex-row">
            <label>Pts:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="flex-row">
            <label>CH:</label>
            <button onclick="changeValue(this, -1)">‚Äì</button>
            <input type="number" value="0" min="0" onchange="updateTotals()" />
            <button onclick="changeValue(this, 1)">+</button>
          </div>
          <div class="field-group">
            ‚≠ê: <input type="checkbox" onchange="updateTotals()" />
          </div>
        </td>
      `;
    }

    table.appendChild(row);
    lockPreviousRounds(); // lock all but last round
    updateTotals();
  }

  function lockPreviousRounds() {
    const rows = document.querySelectorAll("#scoreTable tr");

    // Unlock all inputs first to clear previous locks
    rows.forEach(row => {
      Array.from(row.querySelectorAll("input, button")).forEach(el => {
        el.disabled = false;
        el.classList.remove("locked");
      });
    });

    // Lock all but the last row
    if (rows.length <= 1) return; // nothing to lock if only 1 round

    for (let i = 0; i < rows.length - 1; i++) {
      const row = rows[i];
      Array.from(row.querySelectorAll("input, button")).forEach(el => {
        el.disabled = true;
        el.classList.add("locked");
      });
    }
  }

  // Unlock or lock all rounds on toggle
  function toggleUnlock() {
    const rows = document.querySelectorAll("#scoreTable tr");
    const unlockBtn = document.getElementById("unlockToggle");

    // Check if first round inputs are disabled to decide current state
    const currentlyLocked = rows.length > 1 && rows[0].querySelector("input, button").disabled;

    if (currentlyLocked) {
      // Unlock all
      rows.forEach(row => {
        Array.from(row.querySelectorAll("input, button")).forEach(el => {
          el.disabled = false;
          el.classList.remove("locked");
        });
      });
      unlockBtn.textContent = "üîí Lock All Rounds";
    } else {
      // Lock all but last round
      lockPreviousRounds();
      unlockBtn.textContent = "üîì Unlock All Rounds";
    }
  }

  function changeValue(button, delta) {
    const input = button.parentElement.querySelector("input[type='number']");
    if (!input) return;
    let newValue = parseInt(input.value) + delta;
    if (newValue < 0) newValue = 0;
    input.value = newValue;
    updateTotals();
  }

  function updateTotals() {
    const rows = document.querySelectorAll("#scoreTable tr");
    let total1 = 0;
    let total2 = 0;

    rows.forEach(row => {
      const inputs = row.querySelectorAll("td:nth-child(2) input[type='number']");
      const inputs2 = row.querySelectorAll("td:nth-child(3) input[type='number']");

      if (inputs.length > 0) {
        let pts = 0;
        if (mode === "teams") {
          // In teams mode inputs: first input = pts, second input = cornholes
          pts = parseInt(inputs[0].value) || 0;
        } else {
          // Solos mode inputs: first input pts, second cornholes
          pts = parseInt(inputs[0].value) || 0;
        }
        total1 += pts;
      }

      if (inputs2.length > 0) {
        let pts2 = 0;
        if (mode === "teams") {
          pts2 = parseInt(inputs2[0].value) || 0;
        } else {
          pts2 = parseInt(inputs2[0].value) || 0;
        }
        total2 += pts2;
      }
    });

    document.getElementById("totalCol1").textContent = total1;
    document.getElementById("totalCol2").textContent = total2;
  }

  function resetGame() {
    roundCount = 0;
    document.getElementById("scoreTable").innerHTML = "";
    updateTotals();
  }

  function editNames() {
    if (mode === "solos") {
      const newP1 = prompt("Enter new name for Player 1:", document.getElementById("col1Header").textContent);
      const newP2 = prompt("Enter new name for Player 2:", document.getElementById("col2Header").textContent);
      if (newP1) document.getElementById("col1Header").textContent = newP1;
      if (newP2) document.getElementById("col2Header").textContent = newP2;
    } else {
      const newT1 = prompt("Enter new name for Team 1:", document.getElementById("col1Header").textContent);
      const newT2 = prompt("Enter new name for Team 2:", document.getElementById("col2Header").textContent);
      if (newT1) document.getElementById("col1Header").textContent = newT1;
      if (newT2) document.getElementById("col2Header").textContent = newT2;
    }
  }
</script>

</body>
</html>
